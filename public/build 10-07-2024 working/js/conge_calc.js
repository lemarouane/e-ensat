$("#conge_nbJour").keypress((function(e){return!1})),$("#conge_dateDebut").keypress((function(e){return!1})),$("#conge_dateReprise").keypress((function(e){return!1})),$("#conge_dateDebut").attr("autocomplete","off"),$("#conge_dateReprise").attr("autocomplete","off"),$("#conge_nbJour").attr("autocomplete","off");var pick_debut=0,pick_fin=0,annee_prec=(new Date).getFullYear()-1,annee=(new Date).getFullYear().toString();$("#conge_dateDebut").change((function(){pick_debut=$("#conge_dateDebut").val(),nbjour=calcDaysWV(new Date(pick_debut),new Date(pick_fin)),nbjour>0&&nbjour<365&&null!=pick_fin&&0!=pick_fin?$("#conge_nbJour").val(nbjour):$("#conge_nbJour").val(null),$("#conge_dateReprise").datepicker("setStartDate",new Date($("#conge_dateDebut").val())),max_jours_calc()})),$("#conge_dateReprise").change((function(){pick_fin=$("#conge_dateReprise").val(),nbjour=calcDaysWV(new Date(pick_debut),new Date(pick_fin)),nbjour>0&&nbjour<365&&null!=pick_debut&&0!=pick_debut?$("#conge_nbJour").val(nbjour):$("#conge_nbJour").val(null),$("#conge_dateDebut").datepicker("setEndDate",new Date($("#conge_dateReprise").val())),max_jours_calc()})),$(".js-datepicker").datepicker.dates["fr-FR"]={days:["Dimanche","Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi"],daysShort:["Dim","Lun","Mar","Mer","Jeu","Ven","Sam"],daysMin:["Di","Lu","Ma","Me","Je","Ve","Sa"],months:["Janvier","Fevrier","Mars","Avril","Mai","Juin","juillet","Aout","Septembre","Octobre","Novembre","Decembre"],monthsShort:["Jan","Fev","Mar","Avr","Mai","Jun","Jul","Aou","Sep","Oct","Nov","Dec"],today:"Aujourd'hui",clear:"Effacer",format:"yyyy-mm-dd",titleFormat:"yyyy MM",weekStart:1};var vacances=[annee+"-01-01",,annee+"-01-11",annee+"-05-01",annee+"-07-30",annee+"-08-14",annee+"-08-20",annee+"-08-21",annee+"-11-06",annee+"-08-18"];function calcDaysWV(e,n){nb_days=Math.floor((n.getTime()-e.getTime())/864e5)+1,result=1,day_start=e;for(let e=1;e<nb_days;e++)day_start.setDate(day_start.getDate()+1),day_str=fixDigit(day_start.getDate()),month_str=fixDigit(day_start.getMonth()+1),year_str=day_start.getFullYear(),vacances.includes(year_str.toString()+"-"+month_str.toString()+"-"+day_str.toString())||0==day_start.getDay()||6==day_start.getDay()||result++;return result}function fixDigit(e){return 1===e.toString().length?"0"+e:e}function max_jours_calc(){$("#conge_annee").find(":selected").val()==annee&&"N"==$("#conge_typeConge").find(":selected").val()&&$("#conge_nbJour").attr({max:parseInt($("#cn_annee_encours").text()),min:1}),$("#conge_annee").find(":selected").val()==annee&&"E"==$("#conge_typeConge").find(":selected").val()&&$("#conge_nbJour").attr({max:parseInt($("#ce_annee_encours").text()),min:1}),$("#conge_annee").find(":selected").val()==annee_prec&&"N"==$("#conge_typeConge").find(":selected").val()&&$("#conge_nbJour").attr({max:parseInt($("#cn_annee_prec").text()),min:1})}$(".js-datepicker").datepicker({daysOfWeekDisabled:[0,6],autoclose:!0,language:"fr-FR",todayHighlight:!0,orientation:"right bottom",startDate:new Date,datesDisabled:vacances}),$("#conge_annee").change((function(){$("#conge_typeConge option[value='E']").remove(),$("#conge_typeConge option[value='N']").remove(),"0"!=$("#cn_annee_prec").text()&&$("#conge_annee").find(":selected").val().toString()==annee_prec.toString()&&$("#conge_typeConge").append($("<option>",{value:"N",text:"Congé Normale"})),"0"!=$("#cn_annee_encours").text()&&$("#conge_annee").find(":selected").val().toString()==annee.toString()&&$("#conge_typeConge").append($("<option>",{value:"N",text:"Congé Normale"})),"0"!=$("#ce_annee_encours").text()&&$("#conge_annee").find(":selected").val().toString()==annee.toString()&&$("#conge_typeConge").append($("<option>",{value:"E",text:"Congé Exceptionnel"})),max_jours_calc()})),$("#conge_typeConge").change((function(){max_jours_calc()})),max_jours_calc();