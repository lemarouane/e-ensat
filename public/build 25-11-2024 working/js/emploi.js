!function(e){function a(a){return Date.prototype.getWeek=function(){var e=new Date(this.getFullYear(),0,1);return Math.ceil(((this-e)/864e5+e.getDay()+1)/7)},$val="lo"==a?"act":e(this).val(),$weck=e("#semaine").val(),"act"==$val?($weck=(new Date).getWeek(),$annee=(new Date).getFullYear(),e("#semaine").val($weck),e("#annee").val($annee)):"add"==$val?($weck++,e("#semaine").val($weck)):"minus"==$val?($weck-=1,e("#semaine").val($weck)):($weck=$weck,e("#semaine").val($weck)),e("#image").hide(),$groupes=[],$profs=[],$salles=[],e("#groupe option").each((function(e){1==this.selected&&$groupes.push(this.value)})),e("#prof option").each((function(e){1==this.selected&&$profs.push(this.value)})),e("#salle option").each((function(e){1==this.selected&&$salles.push(this.value)})),e(".div_imagetranscrits").append('<div class="spinner-border" id="spinner"></div>'),e.ajax({url:"textToimageedt",data:{annee:e("#annee").val(),weck:$weck,groupe:$groupes.join(","),profs:$profs.join(","),salles:$salles.join(",")},type:"POST",success:function(a){e("#spinner").remove(),"0"==a?e("#image").attr("src","uploads/img/planning.png"):e("#image").attr("src",a+"?"+Math.random()),e("#image").show()},error:function(e,a,n){alert("Status: "+a),alert("Error: "+n)}}),!1}a("lo"),e(".emploiimage").on("click",null,"co",a)}(jQuery);