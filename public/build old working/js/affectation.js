var $collectionHolder,$addNewItem=$('<a href="#" class="btn btn-primary bi bi-plus-circle shadow-none" style="width:42px;height:35px;padding-top:7px; margin-left:90%"></a>');function addNewForm(){var e=$collectionHolder.data("prototype"),t=$collectionHolder.data("index"),n=e,o=t;n=n.replace(/__name__/g,t),$collectionHolder.data("index",t++);var a=$('<div class="panel form-group "></div>'),d=$('<div class="row panalEngagement"></div>').append(n);a.append(d),addRemoveButton(a),$addNewItem.before(a),$("#decharge_affectation_"+o).addClass("row g-3"),OnlyConsommable()}function addRemoveButton(e){var t=$('<a href="#" class="btn btn-danger bi bi-dash-circle shadow-none" style="width:42px;height:35px; padding-top:7px;"></a>'),n=$('<div style="width:100%; height:30px ; margin-top :10px;"></div>').append(t);t.click((function(e){e.preventDefault(),$(e.target).parents(".panel").slideUp(1e3,(function(){$(this).remove()}))})),e.append(n)}function OnlyConsommable(){document.querySelectorAll('[id^="decharge_c_affectations_"][id$="_article"]').forEach((function(e){for(var t=e.options.length-1;t>=0;t--)e.options[t].textContent.trim()||e.remove(t)}))}$(document).ready((function(){($collectionHolder=$("#affectation_list")).append($addNewItem),$collectionHolder.find(".panel").each((function(e){addRemoveButton($(this))})),$addNewItem.click((function(e){e.preventDefault(),$collectionHolder.data("index",$collectionHolder.find(".panel").length),addNewForm()}))}));