
{% extends 'template.html.twig' %}

{% block title %}{{'attestation_sco'|trans}}{% endblock %}

{% block body %}

				<!--breadcrumb-->

                <div class="page-breadcrumb d-none d-sm-flex align-items-center mb-3">
                        <div class="breadcrumb-title pe-3"> {{'scolarite'|trans}}</div>
                        <div class="ps-3">
                            <nav aria-label="breadcrumb">
                            <ol class="breadcrumb mb-0 p-0">
                                <li class="breadcrumb-item"><a href="javascript:;"><i class="bi bi-file-earmark-text-fill"></i></a>
                                </li>
                                <li class="breadcrumb-item active" aria-current="page"> {{'attestation_sco'|trans}}</li>
                            </ol>
                            </nav>
                        </div>
         
                </div>
                <hr>

                <div class="card border-top border-orange border-0 border-3">
                  <div class="card-body">
                    <div class="table-responsive">
                      <table id="exemple6" class="table table-striped table-bordered dataTable" style="text-align:center !important ;" >
                        <thead>
                          <tr>
					                      <th id="tbl" style="background-color:#ff6632;text-align:center !important ;"></th>
                                <th style="text-align:center !important ;">  {{'date_demande'|trans}}</th>
                                <th style="text-align:center !important ;">  {{'code_apogee'|trans}}</th>
                                <th style="text-align:center !important ;"> {{'nom'|trans}}</th>
                                <th style="text-align:center !important ;"> {{'prenom'|trans}}</th>
    {% if "ROLE_SCOLARITE" in app.user.roles or "ROLE_ADMIN" in app.user.roles %}
                                <th style="text-align:center !important ;"> {{'exporter_pdf'|trans}}</th>
                                <th style="text-align:center !important ;"> {{'op'|trans}}</th>
   {% endif %}

                            </tr>
                        </thead>
                        <tbody>
                            {% for atest in attestations %}
                                <tr role="row" class="odd" >
                                    <td style="text-align:center !important ;">{{atest.id}}</td>
                                    <td style="text-align:center !important ;" class="sorting_1">{{atest.dateDemande ? atest.dateDemande|date('d-m-Y H:i:s') : '' }}</td>
                                    <td style="text-align:center !important ;">{{atest.codeEtudiant.code}}</td>
                                    <td style="text-align:center !important ;">{{atest.codeEtudiant.nom}}</td>
                                    <td style="text-align:center !important ;">{{atest.codeEtudiant.prenom}}</td>
                                    
                                       {% if "ROLE_SCOLARITE" in app.user.roles or "ROLE_ADMIN" in app.user.roles %}
                                    <td style="text-align:center !important ;"><a style="cursor:pointer;" href="{{ path('get_atestation_sco', {id: atest.codeEtudiant.id })}}" data-bs-placement="bottom" aria-label="Edit"><i class="bi bi-file-earmark-pdf" ></i></a></td>

                                    <td>
                                        <div class="text-center">
                                            <a style="cursor:pointer;" data-user="{{atest.id}}" class="text-success icons" data-bs-toggle="modal" data-bs-target="#dataModalOrdre"  data-bs-toggle="tooltip" data-bs-placement="bottom" aria-label="Edit"><i class="bi bi-check2-circle" ></i></a>
                                        </div>
                                    </td>
                                 {% endif %}

                                </tr>
                            {% endfor %}
                        </tbody>

							
					</table>
					</div>
                    
					</div>
                    {% if "ROLE_SCOLARITE" in app.user.roles or "ROLE_ADMIN" in app.user.roles %}  <a class="btn btn-success col-12" id="ajouter"  style="margin-bottom: 5px;"> {{'valider'|trans}}</a>  {% endif %}

				</div>
                <div id="path-to-controller" data-href="{{ path('add_list_attestation')}}"> </div>
                <div id="dataModalOrdre" class="modal fade">  
      <div class="modal-dialog">  
           <div class="modal-content">  
                <div class="modal-header">  
              
                      <h4 class="modal-title"></h4>  
                </div> 
                <form method="post" id="ordre_form">
                  <div class="modal-body row g-3" >
                    <div id="path-to-validation" data-href="{{ path('decisionDoc', {type: 'attestation',id:'1111'})}}"> </div>
                   <div class="form-group">
                    <div>
                        <label class="form-label">{{'n_doc'|trans}}</label>
                        <input id="iddocument" name="searchParam[iddocument]" class="form-control" disabled/>
                    </div>   
 
                   </div>  
                    <div class="form-group">
                      <label class="form-label" > {{'action'|trans}}</label>
                      <select id="ordre"  name="searchParam[decision]" class="form-select">
                        <option value="1"> {{'accepter'|trans}}</option>
                        <option value="0"> {{'refuser'|trans}}</option>
                      </select>
                    </div>
                    <div class="form-group" id="motifText">
                      <label class="form-label"> {{'motif'|trans}}</label>
                      <textarea class="form-control" name="searchParam[motifs]" rows="3" placeholder="Enter ..."></textarea>
                    </div>   
                   </div>  
                  <div class="modal-footer">
                    <input type="submit" name="ordreName" id="ordreId" value="{{'valider'|trans}}" style="float: left" class="btn btn-success" />  
                    <button  type="button" class="btn btn-danger" data-bs-dismiss="modal">{{'fermer'|trans}}</button> 
                  </div> 
              </form> 
            </div>  
        </div>  
    </div>







  
{% endblock %}
{% block javascripts %}
    {{parent()}}
	
    {{ encore_entry_script_tags('scolarite') }}
        


{% endblock %}

